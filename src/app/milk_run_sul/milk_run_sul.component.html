<body>
  <div>
    <div *ngIf="dataLoaded">
      <form>
        <label for="filtroDataInicio">Start date:</label>
        <input type="date" id="filtroDataInicio" name="filtroDataInicio" [(ngModel)]="filtroDataInicio">
        <label for="filtroDataTermino">End date:</label>
        <input type="date" id="filtroDataTermino" name="filtroDataTermino" [(ngModel)]="filtroDataTermino">
        <button type="button" (click)="aplicarFiltroPorData()">Search</button>
        <input type="text" name="searchText" [(ngModel)]="searchText" (input)="filterItems()" placeholder="Find"
          class="ultimo-input">
      </form>
      <table>
        <thead>
          <tr>
            <th class="auto-width">
              Tipo de Veículo
            </th>
            <th class="auto-width">
              Placa
            </th>
            <th class="auto-width">
              Localização
            </th>
            <th class="auto-width">
              Rastreio
            </th>
            <th class="auto-width">
              Fornecedores
            </th>
            <th>
              Destino
            </th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of items; let i = index">
            <tr>
              <td [attr.contenteditable]="editMode[i] ? true : null">{{ item["Transport Type"] }}</td>
              <td (click)="toggleEditMode(i)">{{ item["Plate"] }}</td>
              <td [attr.contenteditable]="editMode[i] ? true : null">{{ item["Plate"] }}</td>
              <td [attr.contenteditable]="editMode[i] ? true : null">{{ item["Plate"] }}</td>
              <td class="left-align auto-width">
                <div class="button-container">
                  <button *ngIf="item.hasOwnProperty('Fornecedor 1') && item['Fornecedor 1'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Fornecedor 1'] }}
                    <br>
                    Janela - {{ item['Janela 1'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Fornecedor 2') && item['Fornecedor 2'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Fornecedor 2'] }}
                    <br>
                    Janela - {{ item['Janela 2'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Fornecedor 3') && item['Fornecedor 3'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Fornecedor 3'] }}
                    <br>
                    Janela - {{ item['Janela 3'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Fornecedor 4') && item['Fornecedor 4'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Fornecedor 4'] }}
                    <br>
                    Janela - {{ item['Janela 4'] }}
                  </button>
                  <!-- Outros botões de fornecedores -->
                </div>
              </td>
              <td class="left-align auto-width">
                <div class="button-container">
                  <button *ngIf="item.hasOwnProperty('Destino 1') && item['Destino 1'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Destino 1'] }}
                    <br>
                    Janela - {{ item['JanelaDestino 1'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Destino 2') && item['Destino 2'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Destino 2'] }}
                    <br>
                    Janela - {{ item['JanelaDestino 2'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Destino 3') && item['Destino 3'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Destino 3'] }}
                    <br>
                    Janela - {{ item['JanelaDestino 3'] }}
                  </button>
                  <button *ngIf="item.hasOwnProperty('Destino 4') && item['Destino 4'] !== ''" style="background-color: rgb(12, 98, 179);" (click)="toggleEditMode(i)">
                    {{ item['Destino 4'] }}
                    <br>
                    Janela - {{ item['JanelaDestino 4'] }}
                  </button>
                  <!-- Outros botões de destino -->
                </div>
              </td>
            </tr>
            <tr *ngIf="editMode[i]">
              <td colspan="6">
                <input type="text" [(ngModel)]="item['Transport Type']">
                <input type="text" [(ngModel)]="item['Plate']">
                <input type="text" [(ngModel)]="item['Fornecedor 1']">
                <input type="text" [(ngModel)]="item['Janela 1']">
                <input type="text" [(ngModel)]="item['Destino 1']">
                <input type="text" [(ngModel)]="item['JanelaDestino 1']">
                <!-- Outros inputs para as colunas restantes -->
                <button (click)="salvar(item); editMode[i] = false">Salvar</button>
              </td>
            </tr>

          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</body>
